const { TELEGRAM_BOT_TOKEN } = require('./config');
const { TelegramBot, helpers: tgHelpers } = require('./base/telegramBot');

if (!TELEGRAM_BOT_TOKEN) throw new Error('Needs TELEGRAM_BOT_TOKEN');


console.log('Transferoute_bot starting...');

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////// Simple telegram echo bot impl ///////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

const telegramBot = TelegramBot({ TELEGRAM_BOT_TOKEN, });

telegramBot.listen(async (update) => {
    if (tgHelpers.getTextFromUpdate(update)) {
        await telegramBot.sendMessage(
            tgHelpers.getChatIdFromUpdate(update),
            tgHelpers.getTextFromUpdate(update) + ' *' + tgHelpers.getTextFromUpdate(update) + '*'
        );
    }
});
console.log('Transferoute_bot listenning');

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
/** const { getAllStations } = require('./dataProviders/stations');

(async () => {
    console.time('getAllStations');
    const stations = await getAllStations();
    console.timeEnd('getAllStations');

    console.log('STATIONS starts here', Object.keys(stations));
})(); **/
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
